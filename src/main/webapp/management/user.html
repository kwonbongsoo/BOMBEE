<!DOCTYPE html>
<html ng-app>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel='stylesheet' href='../node_modules/jquery-ui-dist/jquery-ui.min.css'>
  <!-- <link rel="stylesheet" href="../list/dist/css/swiper.min.css"> -->
  <link rel='stylesheet' href='../css/tomato.css'>
  <link rel='stylesheet' href='../css/user.css'>
  <script src="../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../node_modules/jquery-ui-dist/jquery-ui.min.js"></script>
  <script src="../node_modules/moment/min/moment.min.js"></script>
  <script src="../node_modules/handlebars/dist/handlebars.min.js"></script>
  </head>

<body>
  <div class='user-container'>
    <div class='header'>
      <div class="mobile-container">
        <!-- 새로운 헤더 -->
        <div class="header-menu-bar">
          <span class="header-menu-button">
          </span>
          <span class="header-up" style="display:none"><i class="fa fa-angle-up" aria-hidden="true"></i></span>
          <a id='header-logo'><img src="../image/bombee_title.png"/></a>
          <a id='header-logo-bee' href='#'><i class="header-font fa fa-forumbee" aria-hidden="true"></i></a>
          <div class="header-menu-items" style="display:none">
            <input type="search" id='header-search-bar' style="display:none" placeholder="search" />
            <ul class='header-menu-ul' style="display:none">
              <div class="header-none" style="display:none">
                <li id='header-li-login' style="display:none">Login</li>
                <li style="display:none">Management</li>
                <li style="display:none">Meeting</li>
                <li style="display:none">Mypage</li>
                <li class="header-menu-search" style="display:none"><i class="fa fa-search" aria-hidden="true"></i> Search</li>
              </div>
            </ul>
          </div>
        </div>
      </div>
      <!-- 새로운 헤더 끝 -->
    </div>
    <div class='week-container clearfix swiper-slide'>
      <div class="tab-slider--nav">
        <div class='info'>
          <div class='username'>
            <div class='fa fa-user user'></div>
            홍길동
          </div>
          <div class='year-month'>
            <div class='year'></div>
            <div class='month'></div>
          </div>
        </div>
        <div class="tab-slider--tabs">
          <div class="weekly tab-slider--trigger" rel='day0' style="color: #e04c4c">SUN
            <a href='#' style="color: #e04c4c">
              <div class='sun day day0'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day1'>MON
            <a href='#'>
              <div class='mon day day1'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day2'>TUE
            <a href='#'>
              <div class='tue day day2'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day3'>WED
            <a href='#'>
              <div class='wed day day3'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day4'>THU
            <a href='#'>
              <div class='thu day day4'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day5'>FRI
            <a href='#'>
              <div class='fri day day5'></div>
            </a>
          </div>
          <div class="weekly tab-slider--trigger" rel='day6' style="color: #4c48ce">SAT
            <a href='#' style="color: #4c48ce">
              <div class='sat day day6'></div>
            </a>
          </div>
        </div>
      </div>
      <!--날짜 끝-->
<div id='user-container' class='clearfix tab-slider--container info-container'></div>

        <button id='btttn'>버튼</button>
      </div>

    </div>

  </div>
  <script id="user-template" type="text/x-handlebars-template">
    {{#each mealList}}

    <div id='{{day}}' class='tab-slider--body kcal-body'>
      <div class='kcal-info'>
        <span class='total'>total</span>
        <div class='kcal-total'>{{total-kcal}}</div>
        <span class='kcal'>kcal</span>
      </div>
        {{#meal}}
        {{#breakfast}}
        <div class='meal'>
          <div class='img-fix'>
            <img src='{{img}}'>
          </div>
          <p class='meal-type'>{{type}}</p>
          <p class='meal-name'>{{name}}</p>
          <p class='meal-kcal'>{{kcal}}</p>
          <span class='kcal'>kcal</span>
        </div>
        {{/breakfast}}
        {{#lunch}}
        <div class='meal'>
          <div class='img-fix'>
            <img src='{{img}}'>
          </div>
          <p class='meal-type'>{{type}}</p>
          <p class='meal-name'>{{name}}</p>
          <p class='meal-kcal'>{{kcal}}</p>
          <span class='kcal'>kcal</span>
        </div>
        {{/lunch}}
        {{#dinner}}
        <div class='meal'>
          <div class='img-fix'>
            <img src='{{img}}'>
          </div>
          <p class='meal-type'>{{type}}</p>
          <p class='meal-name'>{{name}}</p>
          <p class='meal-kcal'>{{kcal}}</p>
          <span class='kcal'>kcal</span>
        </div>
        {{/dinner}}
      </div>
      {{/meal}}
    {{/each}}
  </script>

  <script type="text/javascript">
    $.getJSON('../json/user.json', function(result) {
      // 템플릿 소스를 가지고 템플릿을 처리할 함수를 얻는다.
      var templateFn = Handlebars.compile($('#user-template').text())
      var generatedHTML = templateFn(result) // 템플릿 함수에 데이터를 넣고 HTML을 생성한다.
      console.log(templateFn(result))
      var container = $('#user-container')
      var html = container.html()
      container.html(html + generatedHTML) // 새 tr 태그들로 설정한다.
    })
  </script>
  <!-- 헤더스크립트 시작 -->
  <script type="text/javascript" src="../js/user.js"></script>
  <script>
    var count = 0;
    var index = 0;
    $(document).ready(function() {
      $('.header-menu-button').click(function() {

        $(".header-menu-button").toggleClass('header-menu-button-open');
        $(".header-menu-items").toggleClass('header-menu-items-open');
        $('#header-search-bar').val('')

        //메뉴바는 기본적으로 z인덱스가 5
        //화면의 클릭이벤트 z인덱스는 기본적으로 6이다.
        if (index == 0) {
          $('.indexUp').css('z-index', '2') //메뉴바 클릭했을때 화면중앙의 z인덱스 낮춤으로써
          //헤더를 클릭할수 있게 만듬
          index = 1;
          $('.header-menu-items').css('display', '');
          $('.header-menu-items *').css('display', '');
          $('#header-search-bar').css('display', 'none');
        } else if (index == 1) {
          $('.indexUp').css('z-index', '6') //메뉴바를 끌때 화면클릭이벤트는 z인덱스가 2임으로
          //z인덱스를 다시 올려줘야 클릭이 가능하다.
          index = 0;
          $('.header-menu-items').css('display', 'none');
          $('.header-menu-items *').css('display', 'none');
          $('#header-search-bar').css('display', '');
        }

        if (count == 1) {
          $('#header-search-bar').css('display', 'none')
          $('.header-up').css('display', 'none')
          $('.header-none').css('display', 'block')
          $('#header-logo').slideToggle()
          count = 0;
        }
      });
    });
    $('.header-menu-search').click(() => {
      $('.header-none').slideToggle();
      $('.header-up').slideToggle()
      $('#header-logo').slideToggle()

      $('#header-search-bar').slideToggle()

      $('#header-search-bar').focus()
      count = 1;
    })
    $('.header-up').click(() => {
      $('.header-up').slideToggle()
      $('#header-search-bar').val('')
      $('.header-none').slideToggle()
      $('#header-search-bar').slideToggle()
      $('#header-logo').slideToggle()
      count = 0;
    })
    $('#header-li-login').click(() => {
      location.href = '../login/login.html'
    })
  </script>
  <!--  헤더스크립트 끝 -->
</body>

</html>
