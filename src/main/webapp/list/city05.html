<!DOCTYPE html>
<html>
<head>


</head>
<body>

<button>Get JSON data</button>

<div></div>


<div>
  <select id='code-container'>
    <option value='default'>지역</option>
  </select>

  <select id='si-container'>
    <option>시군구</option>
  </select>

</div>


<script id='codeList' type="text/x-handlebars-template">
  {{#each admVOList.admVOList}}
    <option value='{{admCode}}'>{{admCodeNm}}</option>
  {{/each}}
</script>

<script id='siList' type="text/x-handlebars-template">
  {{#each admVOList.admVOList}}
    <option class='select'>{{lowestAdmCodeNm}}</option>
  {{/each}}
</script>


<script src="../node_modules/jquery/dist/jquery.min.js"></script>
<script src="../node_modules/handlebars/dist/handlebars.min.js"></script>

<script>
$(document).ready(function(){
    $("button").click(function(){
        $.getJSON("http://openapi.nsdi.go.kr/nsdi/eios/service/rest/AdmService/admCodeList.json?authkey=4c3dd139ed40e85475d902&admCode", function(result){

           console.log(result.admVOList.admVOList[0].admCodeNm)
           console.log(result.admVOList.admVOList.length)
        });
    });
});
</script>

<script type="text/javascript">

$.getJSON('http://openapi.nsdi.go.kr/nsdi/eios/service/rest/AdmService/admCodeList.json?authkey=4c3dd139ed40e85475d902', function(result) {
  // 템플릿 소스를 가지고 템플릿을 처리할 함수를 얻는다.
  var templateFn = Handlebars.compile($('#codeList').text())
  var generatedHTML = templateFn(result) // 템플릿 함수에 데이터를 넣고 HTML을 생성한다.
  var container = $('#code-container')
  var html = container.html()
  container.html(html + generatedHTML) // 새 tr 태그들로 설정한다.

 })

var admCode;

$( "#code-container" )
  .change(function() {
    admCode=$( "#code-container option:selected").val();
    console.log('admCode: ' + admCode);

    $('.select').remove();
    // $('').replaceAll('#si-container > option');
    siList();
  })


function siList(){
  $.getJSON('http://openapi.nsdi.go.kr/nsdi/eios/service/rest/AdmService/admSiList.json?authkey=a32d52326f4cd3bd8b9654&admCode='+admCode, function(result) {
    var templateFn = Handlebars.compile($('#siList').text())
    var generatedHTML = templateFn(result) // 템플릿 함수에 데이터를 넣고 HTML을 생성한다.
    var container = $('#si-container')
    var html = container.html()
    container.html(html + generatedHTML) // 새 tr 태그들로 설정한다.

    // console.log(result.admVOList.admVOList[0].lowestAdmCodeNm);
    // console.log(result.admVOList.admVOList[1].lowestAdmCodeNm);
  })
}


// admCode:11 서울 // admCode:26 부산 // admCode:27 대구 // admCode:28 인천 // admCode:29 광주
// admCode:30 대전 // admCode:31 울산 // admCode:36 세종 // admCode:41 경기 // admCode:42 강원
// admCode:43 충청북도 // admCode:44 충청남도 // admCode:45 전라북도 // admCode:46 전라남도
// admCode:47 경상북도 // admCode:48 경상남도 // admCode:50 제주


</script>


</body>
</html>
