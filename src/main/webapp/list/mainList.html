<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="user-scalable=no,initial-scale=1,maximum-scale=1" />
  <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel='stylesheet' href='../css/tomato.css'>
  <link rel='stylesheet' href='../css/mainList.css'>
  <link rel="stylesheet" href="dist/css/swiper.min.css">
  <script src='../node_modules/jquery/dist/jquery.min.js'></script>
  <script src="../node_modules/jquery-ui-dist/jquery-ui.js"></script>
  <script src="../node_modules/handlebars/dist/handlebars.min.js"></script>
  <script>
    $(document).ready(function() {
      $('.header').load('../menu/new.html')
    })
  </script>
</head>

<body>
  <div class='allList-container'>
    <div class='header'></div>
    <!-- Swiper -->
    <div class="indexUp swiper-container">
      <div class="swiper-wrapper">
        <div class="swiper-slide"><img src='../image/main_1.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_2.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_3.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_4.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_5.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_6.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_7.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_8.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_9.jpg'></div>
        <div class="swiper-slide"><img src='../image/main_10.jpg'></div>
      </div>
    </div>
    <div class='indexUp wrap'>
      <div class="scrollBlind">
        <div class="btn-group outer" data-toggle="buttons">
          <label class="btn" role="button">
            <input type="radio" name="options" value="1" required="required">
            <i class="fa fa-map-marker" aria-hidden="true"></i>
          </label>
          <label class="btn click margin-minus" role="button" >
            <input  type="radio" name="options" value="2" id='hot-cos'>인기코스
          </label>
          <label class="btn margin-minus" role="button">
            <input  type="radio" name="options" value="3" id='health' >헬스
          </label>
          <label class="btn margin-minus" role="button">
            <input type="radio" name="options" value="4" id='yoga'>요가
          </label>
          <label class="btn margin-minus" role="button" >
            <input  type="radio" name="options" value="5" id='pilates'>필라테스
          </label>
          <label class="btn margin-minus" role="button" >
            <input  type="radio" name="options" value="6" id='spinning'>스피닝
          </label>
        </div>
        <!-- btn-group -->
      </div>
      <!--scrollBlind  -->
    </div>
    <!--indexUp wrap  -->
    <div id='promotion-list-container'>
      <div id='promotion-in'>
        <div class='left-promotion main-promotion-heightz'>
          <img src='../image/first.jpg'>
        </div>
      </div>

    </div>
    <!-- promotion-list-container -->

  </div>
  <!-- allList-container -->
  <!-- Swiper JS -->
  <script src="dist/js/swiper.min.js"></script>
  <!-- Initialize Swiper -->
  <script id='health-template' type="text/x-handlebars-template">
    {{#each healthList}} {{#isIndex no}}
    <div class='right-promotion main-promotion-height promotion'>
      {{else}}
      <div class='left-promotion main-promotion-height promotion'>
        {{/isIndex}}
        <div class='img'>
          <img src='{{img}}'>
        </div>
        <div class='span'>
          <span>{{title}}</span>
        </div>
      </div>
      {{/each}}
  </script>
  <script>
    var json = '../json/hot-cos.json'
    var category;
    var count = 0
    var swiper = new Swiper('.swiper-container', {
      loop: true,
      autoplay: 2000,
      autoplayDisableOnInteraction: false
    });
    
    $('.btn').click(()=> {
    	$('.btn').css('color', 'black');
    	$('.btn-test').css('color', 'white')
    })

    Handlebars.registerHelper('isIndex', function(no, options) {
      if (no % 2 == 1) {
        return options.fn(this);
      } else {
        return options.inverse(this);
      }
    });

    getData(json);

    function getData(json) {
      $('.promotion').remove()
      $.getJSON(json, function(result) {
        // 템플릿 소스를 가지고 템플릿을 처리할 함수를 얻는다.
        var templateFn = Handlebars.compile($('#health-template').text())
        var generatedHTML = templateFn(result) // 템플릿 함수에 데이터를 넣고 HTML을 생성한다.
        var container = $('#promotion-in')
        var html = container.html()
        container.html(html + generatedHTML) // 새 tr 태그들로 설정한다.
      })
    }

    function borderBottom(category) {
      $('.btn').removeClass('click')
      $(category).parent().addClass('click')
    }

    $('#hot-cos').click(() => {
      category = '#hot-cos'
      borderBottom(category)
      json = '../json/hot-cos.json'
      getData(json)
    })

    $('#pilates').click(() => {
      category = '#pilates'
      borderBottom(category)
      json = '../json/pilates.json'
      getData(json)
    })

    $('#yoga').click(() => {
      category = '#yoga'
      borderBottom(category)
      json = '../json/yoga.json'
      getData(json)
    })

    $('#health').click(() => {
      category = '#health'
      borderBottom(category)
      json = '../json/health.json'
      getData(json)
    })
    $('#spinning').click(() => {
      category = '#spinning'
      borderBottom(category)
      json = '../json/spinning.json'
      getData(json)
    })
  </script>
</body>

</html>
